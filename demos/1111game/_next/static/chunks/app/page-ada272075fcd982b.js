(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2282:function(e,t,s){Promise.resolve().then(s.bind(s,8558))},4585:function(e,t,s){"use strict";s.r(t),s.d(t,{SanContext:function(){return d},SanElem:function(){return l},SceneElem:function(){return h},SceneInfo:function(){return a}});var n=s(8038),i=s(7486),r=s(719);class a{update(){this.update_fn&&this.update_fn()}constructor(e,t,s,n){this.scene=new i.xsS,this.camera=new i.cPb,this.keep=!0,this.html=e,this.scene=t,this.camera=s,this.update_fn=n}}class o{renderSceneInfo(e){var t,s,n;let{left:i,right:r,top:a,bottom:o,width:l,height:h}=e.html.getBoundingClientRect(),d=this.canvas.getBoundingClientRect(),c=d.height,u=d.width;if(o<0||a>c||r<0||i>u)return;let m=c-o,g=e.camera;g.aspect=l/h,g.updateProjectionMatrix(),e.update&&e.update(),null===(t=this.renderer)||void 0===t||t.setScissor(i,m,l+1,h+1),null===(s=this.renderer)||void 0===s||s.setViewport(i,m,l+1,h+1),null===(n=this.renderer)||void 0===n||n.render(e.scene,e.camera)}render(){for(let e=0;e<this.sceneInfoList.length;++e){let t=this.sceneInfoList[e];t.keep?(this.renderSceneInfo(t),this.dirty=!0):(t.scene=this.black_scene,this.renderSceneInfo(t),this.sceneInfoList.splice(e,1))}}handleResize(){let e=this.renderer,t=window.innerWidth,s=window.innerHeight;void 0!=e&&e.setSize(t,s,!1)}init(e){if(window.addEventListener("resize",()=>{this.handleResize()}),void 0!=this.renderer)return;this.canvas=e,this.renderer=new i.CP7({canvas:e,alpha:!0,antialias:!0}),this.renderer.autoClear=!0,this.handleResize(),this.renderer.setScissorTest(!0);let t=()=>{this.render(),window.requestAnimationFrame(t)};t()}add(e){this.sceneInfoList.push(e)}asyncAdd(){return e=>{this.add(e)}}dispose(){this.renderer.dispose(),this.renderer=void 0,this.canvas=void 0}constructor(){this.sceneInfoList=[],this.renderer=void 0,this.dirty=!1,this.black_scene=new i.xsS,this.black_scene.background=new i.Ilk(0)}}function l(){let e=r.useContext(d),t=r.useRef(null);return r.useEffect(()=>{e.init(t.current)}),(0,n.jsx)("canvas",{style:{top:0,position:"fixed",zIndex:1},ref:t})}function h(e){let{className:t,style:s,scene:i,camera:o,update:l,effect:h}=e,c=r.useRef(null),u=r.useContext(d);return r.useEffect(()=>{let e;h&&(e=h(c.current,o));let t=new a(c.current,i,o,l);return u.add(t),()=>{e&&e(),t.keep=!1}}),(0,n.jsx)("canvas",{ref:c,className:t,style:s})}let d=r.createContext(new o)},8558:function(e,t,s){"use strict";s.r(t),s.d(t,{ClientPage:function(){return j}});var n=s(8038),i=s(7486),r=s(6246),a=s(4585);class o{setVertSize(e,t){let s=this.vert_geometry.getAttribute("size");s.array[e]=t,s.needsUpdate=!0}setVertColor(e,t){let s=this.vert_geometry.getAttribute("color"),n=s.array;t.toArray(n,3*e),s.needsUpdate=!0}showEdge(e){let t=this.edge_map;if(!0==t.has(e))return;let s=this.edge_geometry.getIndex(),n=s.array,i=this.edge_draw_end,r=2*e;t.set(e,i),n[i]=r,n[i+1]=r+1,this.edge_draw_end+=2,s.needsUpdate=!0,this.edge_geometry.setDrawRange(0,this.edge_draw_end)}hideEdge(e){let t=this.edge_map;if(!1==t.has(e))return;let s=t.get(e),n=this.edge_geometry.getIndex(),i=n.array,r=this.edge_draw_end;i[s]=i[r-2],i[s+1]=i[r-1],i[r-2]=0,i[r-1]=0,t.delete(e),this.edge_draw_end-=2,n.needsUpdate=!0,this.edge_geometry.setDrawRange(0,this.edge_draw_end)}setEdgeVisibility(e,t){t?this.showEdge(e):this.hideEdge(e)}setEdgeColor(e,t,s){let n=this.edge_geometry.getAttribute("color"),i=n.array;t?s.toArray(i,2*e*3):s.toArray(i,2*e*3+3),n.needsUpdate=!0}dispose(){this.edge_geometry.dispose(),this.edge_material.dispose(),this.vert_geometry.dispose(),this.vert_material.dispose()}constructor({graph:e}){this.obj=new i.ZAu,this.vert_geometry=new i.u9r,this.vert_material=new i.jyz({vertexShader:"\nuniform float uPixelRatio;\nattribute vec3 color;\nattribute float size;\nvarying vec3 vColor;\n\nvoid main()\n{\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n    vec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n\n    gl_Position = projectionPosition;\n    gl_PointSize = 2.0 * size * uPixelRatio;\n    // gl_PointSize *= (1.0 / - viewPosition.z);\n\n    vColor = color;\n}\n",fragmentShader:"\nvarying vec3 vColor;\n\nvoid main()\n{    \n    gl_FragColor = vec4(vColor, 1.0);\n}",uniforms:{uPixelRatio:{value:1.5}}}),this.edge_geometry=new i.u9r,this.edge_material=new i.nls({vertexColors:!0}),this.edge_map=new Map,this.edge_draw_end=0,this.h3=new i.Pa4,this.size=Math.floor(e.position.length/e.Dim);let t=this.size,s=new Float32Array(e.position),n=new Float32Array(3*t),r=new Float32Array(t),a=new i.TlE(s,3),o=new i.TlE(r,1),l=new i.TlE(n,3),h=this.vert_geometry;h.setAttribute("position",a),h.setAttribute("color",l),h.setAttribute("size",o),this.obj.add(new i.woe(h,this.vert_material));let d=e.indices,c=Math.floor(d.length/2),u=new Float32Array(2*c*3),m=new Float32Array(2*c*3),g=new Uint32Array(2*c),x=this.h3;for(let e=0;e<d.length;e+=2){let t=d[e],n=d[e+1];x.fromArray(s,3*t),x.toArray(u,3*e),x.fromArray(s,3*n),x.toArray(u,3*e+3)}let f=this.edge_geometry,p=new i.TlE(m,3);f.setAttribute("position",new i.TlE(u,3)),f.setAttribute("color",p);let w=new i.TlE(g,1);w.name="Edge indices attribute.",f.setIndex(w),f.setDrawRange(0,0),this.obj.add(new i.ejS(f,this.edge_material))}}var l=s(719);function h(e){let{ste:t,i:s,dtmd:i,from_edge:r,click:a,hover:o}=e,[h,d]=l.useState(!1),c=t.slice(1,3),u=t.slice(3,5);return(0,n.jsxs)("button",{className:"text-center w-full",onClick:()=>{a(s,r)},onMouseOver:()=>{o(s,r),d(!0)},onMouseLeave:()=>{d(!1)},children:[h?">":"",c," | ",u,h?"<":""]})}function d(e){let{ste:t,dtmd:s}=e,i="0"==t[0]?"A":"B",r=t.slice(1,3),a=t.slice(3,5);return(0,n.jsxs)("tr",{className:"text-black dark:text-white",suppressHydrationWarning:!0,children:[(0,n.jsx)("td",{className:"text-center",children:i}),(0,n.jsx)("td",{className:"text-center",children:r}),(0,n.jsx)("td",{className:"text-center",children:a}),(0,n.jsx)("td",{className:"text-center",children:s<2?"U":2==s?"B":"A"})]})}function c(e){let{control:t,self_close:s,className:i,style:r,hidden:a}=e,[o,c]=l.useState(0),u=(e,s)=>{t.pushNext(e,s),c(o+1)},m=(e,s)=>{t.hoverNext(e,s)},g=t.getPath(),x=t.getNexts(),f=g.at(-1),p=0==x.length,w="0"==f.ste.charAt(0)?"A":"B";return(0,n.jsx)("section",{hidden:a,className:i,style:r,children:(0,n.jsxs)("div",{className:"text-black dark:text-white select-none",children:[(0,n.jsx)("button",{className:"w-full p-3 text-right hover:underline",onClick:s,children:"Close"}),(0,n.jsx)("div",{className:"text-center font-thin text-xl",children:p?3==f.dtmd?"A wins":"B wins":"".concat(w,"'s turn")}),(0,n.jsx)("div",{hidden:p,className:"text-center font-thin text-lg",children:"choose:"}),(0,n.jsx)("div",{children:x.map((e,t)=>(0,n.jsx)(h,{ste:e.ste,dtmd:e.dtmd,i:e.i,from_edge:e.from_edge,click:u,hover:m},t))}),(0,n.jsx)("hr",{className:"my-3"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{hidden:1==t.getSize(),className:"text-center w-full p-5 br-20 n-select hover:underline",onClick:()=>{t.popHead(),c(o+1)},children:"Remove most recent"}),(0,n.jsx)("div",{className:"text-center",children:"Game States"}),(0,n.jsx)("div",{className:"overflow-auto max-h-screen w-full",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"",children:[(0,n.jsx)("th",{className:"font-thin",children:"Turn"}),(0,n.jsx)("th",{className:"font-thin",children:"A"}),(0,n.jsx)("th",{className:"font-thin",children:"B"}),(0,n.jsx)("th",{className:"font-thin",children:"Pred"})]})}),(0,n.jsx)("tbody",{children:g.reverse().map((e,t)=>(0,n.jsx)(d,{ste:e.ste,dtmd:e.dtmd},t))})]})})]})]})})}class u{setTheme(e){let t=this.graph.indices,s=this.info.o,n=this.info.dtmd,r=new i.Pa4(1,1,1),a=new i.Pa4(0,0,0);e||(r.set(0,0,0),a.set(1,1,1));let o=this.graph_ctrl;for(let e=0;e<s.length;++e){let i=s[e];for(let e=0;e<i.length;++e){let s=i[e],l=Math.floor(s/2),h=s%2==1;n[t[s]]/2==0&&o.setEdgeColor(l,h,r),o.setEdgeColor(l,!h,a)}}}toggleThemeMode(){this.dark=!this.dark,this.setTheme(this.dark)}setUpdateFocus(e){this.update_focus=e}getSize(){return this.path.length}popHead(){this.path.pop(),this.graph_ctrl.hideEdge(this.edge_path.pop()),void 0!=this.hovering&&this.graph_ctrl.hideEdge(this.hovering)}getHead(){return this.path.at(-1)}getPath(){let e=this.info;return this.path.map(t=>({ste:e.ste[t],i:t,dtmd:this.info.dtmd[t]}))}hoverNext(e,t){void 0!=this.hovering&&this.graph_ctrl.hideEdge(this.hovering);let s=Math.floor(t/2);this.graph_ctrl.showEdge(s),this.hovering=s}pushNext(e,t){let s=Math.floor(t/2);this.hovering!=s?this.graph_ctrl.showEdge(s):this.hovering=void 0,this.path.push(e),this.edge_path.push(s);let n=new i.Pa4().fromArray(this.graph.position,3*e);this.update_focus&&this.update_focus(n)}getNexts(){let e=this.path,t=this.info,s=this.graph.indices,n=e.length,i=e[n-1],r=t.o[i],a=[];for(let e=0;e<r.length;++e)a.push(r[e]);return a.map((e,n)=>({ste:t.ste[s[e]],i:s[e],dtmd:t.dtmd[s[e]],from_edge:e}))}dispose(){this.graph_ctrl.dispose()}constructor(e,t,s,n){this.path=[0],this.edge_path=[],this.graph=e,this.info=t,this.graph_ctrl=s,this.dark=n,this.setTheme(n)}}s(6347);var m=s(2846),g=s.n(m);function x(e){return e.toString().replaceAll(/[\d\.]/g,"").trim().replaceAll(" ","-")}function f(e){let{children:t}=e;if(void 0==t)return(0,n.jsx)(n.Fragment,{});let s=x(t.toString());return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"H1",id:s,children:(0,n.jsx)(g(),{href:"#".concat(s),children:t})}),(0,n.jsx)("hr",{className:"H1-HR"})]})}function p(e){let{children:t}=e;if(void 0==t)return(0,n.jsx)(n.Fragment,{});let s=x(t.toString());return(0,n.jsx)("h2",{className:"H2",id:s,children:(0,n.jsx)(g(),{href:"#".concat(s),children:t})})}function w(e){let{children:t}=e;return void 0==t?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)("p",{className:"P",children:t})}function v(e){let{className:t,style:s,self_close:i,hidden:r}=e;return(0,n.jsxs)("section",{hidden:r,className:t,style:s,children:[(0,n.jsx)("button",{className:"w-full p-3 text-right hover:underline",onClick:i,children:"Close"}),(0,n.jsxs)("div",{className:"container m-auto",children:[(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(f,{children:" Game Intro "})}),(0,n.jsx)("div",{className:"flex-center p-2",children:(0,n.jsxs)(w,{children:["It's a simple finger game of two players. Each player uses their hands to represent two numbers from 0 to 9 inclusively.",(0,n.jsx)("br",{}),"For example, state (11 | 11) is the starting state, which both players have their hands as 1.",(0,n.jsx)("br",{}),"For each round, one player can use one of their hands to touch one of the hands of their opponent and change their hand to the sum of the two hands mod by 10.",(0,n.jsx)("br",{}),"For example, when 9 + 9, the player of current round would get 8. And when 1 + 9, the player would get 0. When a hand is zero, both players can't use that hand to add.",(0,n.jsx)("br",{}),"The first player to get both of their hands zero wins."]})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(f,{children:" Idea "})}),(0,n.jsx)("div",{className:"flex-center p-2",children:(0,n.jsxs)(w,{children:["Using the Multi-level Force-directed graph layout algorithm I implemented, I visualized the entire game graph.",(0,n.jsx)("br",{}),"In the visualization, red indicates the winner would be the first player if they don't make mistakes, similar for blue. ",(0,n.jsx)("br",{}),"States in white indicate a game will end in infinite loops if both players don't make mistakes. ",(0,n.jsx)("br",{}),"The colors of the edges illustrate which type of state they are leading to.",(0,n.jsx)("br",{}),"I think this visualization is good for understanding the idea of 'optimal moves', 'can win if not making mistakes' and the state representation of games."]})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(p,{children:"Controls:"})}),(0,n.jsxs)("div",{className:"font-6 text-center",children:[(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)(p,{children:"Mouse:"}),(0,n.jsx)(w,{children:"rotate, zoom, and span."})]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)(p,{children:"Push:"}),(0,n.jsx)(w,{children:"click the States to play the game."})]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)(p,{children:"Pop:"}),(0,n.jsx)(w,{children:"pop the most recent state out."})]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)(p,{children:"Hover on State:"}),(0,n.jsx)(w,{children:"highlight the edge leading to the next potential state in the Visualization."})]})]})]})]})}function j(e){let t,{graph:s,info:h}=e,[d,m]=l.useState(!0),[x,f]=l.useState(!0),{game_ctrl:p,scene:w,camera:j}=l.useMemo(()=>(function(e,t){let s=function(e){let{graph:t,info:s}=e,n=s.dtmd,r=Math.floor(t.position.length/t.Dim),a=new o({graph:t}),l=new i.Pa4(180,4,38),h=new i.Pa4(100,100,100),d=new i.Pa4(59,76,192);l.multiplyScalar(1/255),h.multiplyScalar(1/255),d.multiplyScalar(1/255);for(let e=0;e<r;++e){let t=n[e];t/2?(a.setVertSize(e,.7),t%2?a.setVertColor(e,l):a.setVertColor(e,d)):(a.setVertSize(e,.2),a.setVertColor(e,h))}let c=t.indices,u=s.o;for(let e=0;e<u.length;++e){let t=u[e];for(let e=0;e<t.length;++e){let s=t[e],i=Math.floor(s/2),r=s%2==1,o=n[c[s]];o/2&&(o%2?a.setEdgeColor(i,r,l):a.setEdgeColor(i,r,d))}}return a}({graph:e,info:t}),n=new u(e,t,s,!0),r=new i.xsS,a=new i.cPb(75,1,.01,100);return a.position.z=1.3,r.add(s.obj),{game_ctrl:n,scene:r,camera:a}})(s,h),[s,h]);l.useEffect(()=>()=>{p.dispose()},[p]);let y=l.useRef(null);return(0,n.jsxs)("main",{className:"fixed text-black dark:text-white",style:{zIndex:3},children:[(0,n.jsx)(a.SceneElem,{scene:w,camera:j,className:"w-screen h-screen fixed",style:{zIndex:2},effect:(e,s)=>{let n=new r.z(s,e);n.autoRotate=!0,n.autoRotateSpeed=.2,n.maxDistance=4,n.minDistance=.1,n.maxZoom=2,n.minZoom=.1,y.current=n,p.setUpdateFocus(e=>{n.target=e});let i=Date.now();return t=()=>{let e=Date.now();n.update((e-i)/1e3),i=e},()=>{n.dispose()}},update:()=>{t&&t()}}),(0,n.jsxs)("nav",{className:"fixed font-thin top-5 w-screen text-center",style:{zIndex:3},children:[(0,n.jsx)(g(),{href:"https://www.zugzwang.fun/",as:"https://www.zugzwang.fun/",className:"inline-block mx-3 hover:underline",children:"Home"}),(0,n.jsx)("button",{className:"inline-block mx-3 hover:underline",onClick:()=>{m(!0),f(!1)},children:"Open Intro"}),(0,n.jsx)("button",{className:"inline-block mx-3 hover:underline",onClick:()=>{m(!1)},children:"Open Control"}),(0,n.jsx)("button",{className:"inline-block mx-3 hover:underline",onClick:()=>{y.current&&y.current.reset()},children:"Reset Camera"})]}),(0,n.jsx)(v,{className:"fixed h-screen max-h-screen overflow-auto backdrop-blur-sm justify-center w-full",style:{zIndex:3},hidden:x,self_close:()=>{f(!0)}}),(0,n.jsx)(c,{className:"fixed right-0 w-full lg:w-1/4 xl:w-1/5 h-screen backdrop-blur-sm",style:{zIndex:3},hidden:d,self_close:()=>{m(!0)},control:p}),(0,n.jsx)("div",{className:"fixed w-full bottom-5 left-0 text-center text-black text-xl font-thin dark:text-white",children:"Designed by Zhifeng 2023-10-22"})]})}},6347:function(){}},function(e){e.O(0,[116,992,120,543,744],function(){return e(e.s=2282)}),_N_E=e.O()}]);