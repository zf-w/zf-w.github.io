(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{572:function(e,t,n){Promise.resolve().then(n.bind(n,4585)),Promise.resolve().then(n.t.bind(n,6344,23)),Promise.resolve().then(n.t.bind(n,7995,23))},4585:function(e,t,n){"use strict";n.r(t),n.d(t,{SanContext:function(){return u},SanElem:function(){return a},SceneElem:function(){return d},SceneInfo:function(){return o}});var r=n(8038),s=n(7486),i=n(719);class o{update(){this.update_fn&&this.update_fn()}constructor(e,t,n,r){this.scene=new s.xsS,this.camera=new s.cPb,this.keep=!0,this.html=e,this.scene=t,this.camera=n,this.update_fn=r}}class c{renderSceneInfo(e){var t,n,r;let{left:s,right:i,top:o,bottom:c,width:a,height:d}=e.html.getBoundingClientRect(),u=this.canvas.getBoundingClientRect(),l=u.height,h=u.width;if(c<0||o>l||i<0||s>h)return;let f=l-c,p=e.camera;p.aspect=a/d,p.updateProjectionMatrix(),e.update&&e.update(),null===(t=this.renderer)||void 0===t||t.setScissor(s,f,a+1,d+1),null===(n=this.renderer)||void 0===n||n.setViewport(s,f,a+1,d+1),null===(r=this.renderer)||void 0===r||r.render(e.scene,e.camera)}render(){for(let e=0;e<this.sceneInfoList.length;++e){let t=this.sceneInfoList[e];t.keep?(this.renderSceneInfo(t),this.dirty=!0):(t.scene=this.black_scene,this.renderSceneInfo(t),this.sceneInfoList.splice(e,1))}}handleResize(){let e=this.renderer,t=window.innerWidth,n=window.innerHeight;void 0!=e&&e.setSize(t,n,!1)}init(e){if(window.addEventListener("resize",()=>{this.handleResize()}),void 0!=this.renderer)return;this.canvas=e,this.renderer=new s.CP7({canvas:e,alpha:!0,antialias:!0}),this.renderer.autoClear=!0,this.handleResize(),this.renderer.setScissorTest(!0);let t=()=>{this.render(),window.requestAnimationFrame(t)};t()}add(e){this.sceneInfoList.push(e)}asyncAdd(){return e=>{this.add(e)}}dispose(){this.renderer.dispose(),this.renderer=void 0,this.canvas=void 0}constructor(){this.sceneInfoList=[],this.renderer=void 0,this.dirty=!1,this.black_scene=new s.xsS,this.black_scene.background=new s.Ilk(0)}}function a(){let e=i.useContext(u),t=i.useRef(null);return i.useEffect(()=>{e.init(t.current)}),(0,r.jsx)("canvas",{style:{top:0,position:"fixed",zIndex:1},ref:t})}function d(e){let{className:t,style:n,scene:s,camera:c,update:a,effect:d}=e,l=i.useRef(null),h=i.useContext(u);return i.useEffect(()=>{let e;d&&(e=d(l.current,c));let t=new o(l.current,s,c,a);return h.add(t),()=>{e&&e(),t.keep=!1}}),(0,r.jsx)("canvas",{ref:l,className:t,style:n})}let u=i.createContext(new c)},7995:function(){},6344:function(){},3952:function(e,t,n){"use strict";var r=n(719),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var r,i={},d=null,u=null;for(r in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!a.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:d,ref:u,props:i,_owner:c.current}}t.Fragment=i,t.jsx=d,t.jsxs=d},8038:function(e,t,n){"use strict";e.exports=n(3952)}},function(e){e.O(0,[116,120,543,744],function(){return e(e.s=572)}),_N_E=e.O()}]);