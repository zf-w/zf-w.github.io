(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{77:function(e,t,s){Promise.resolve().then(s.bind(s,9672))},9672:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var n=s(8038);function c(e){let{n:t,x:s,y:c}=e;return(0,n.jsxs)("svg",{stroke:"var(--fg)",fill:"var(--fg)",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",x:s,y:c,width:1,children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"1"}),(0,n.jsx)("text",{x:12,y:13,className:"p0",children:t})]})}function l(e){let{n:t,x:s,y:c}=e;return(0,n.jsxs)("svg",{stroke:"var(--fg)",fill:"None",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",width:1,x:s,y:c,children:[(0,n.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"1"}),(0,n.jsx)("text",{x:12,y:13,className:"p1",children:t})]})}function r(e){let{n:t,x:s,y:r}=e;return(0,n.jsx)(n.Fragment,{children:t%2==0?(0,n.jsx)(c,{n:t,x:s,y:r}):(0,n.jsx)(l,{n:t,x:s,y:r})})}function a(e){let{col:t,x:s,h:c}=e;return(0,n.jsx)(n.Fragment,{children:t.map((e,t)=>(0,n.jsx)(r,{n:e,x:s,y:c/2-.5-t},t))})}function i(e){let{actions:t,w:s,h:c}=e,l=function(e,t){let s=[];for(let e=0;e<t;++e)s.push([]);for(let t=0;t<e.length;++t)s[e[t]-1].push(t);return s}(t,s);return(0,n.jsx)("svg",{className:"c4-board",stroke:"currentColor",fill:"currentColor",viewBox:"0 0 ".concat(s," ").concat(c),xmlns:"http://www.w3.org/2000/svg",children:l.map((e,t)=>(0,n.jsx)(a,{col:e,x:t,h:c},t))})}s(3850);var o=s(719);function h(e){let t="";for(let s=0;s<e.length;++s){let n=e[s];t=t.concat(n.toString())}return t}function d(e){let{moves_num:t}=e;return(0,n.jsxs)("div",{className:"h-50",children:[(0,n.jsx)("div",{children:"Calculating..."}),t%2==0?"Player 0's move ".concat(t):"Player 1's move ".concat(t)]})}function x(e){let t,s,c,{res:l,moves_num:r}=e,a=l.s,i=r%2==0;return 0!=a?(t=!1,c=(s=a>0&&i||a<0&&!i)?40-2*(Math.abs(a)-1):41-2*(Math.abs(a)-1)):t=!0,(0,n.jsx)("table",{className:"text-left",id:"$info-table",children:(0,n.jsxs)("tbody",{children:[l.nexts.length>0&&(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"To play:"}),(0,n.jsx)("td",{className:"t-a-r",children:i?"Player 0":"Player 1"})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Score:"}),(0,n.jsx)("td",{className:"t-a-r",children:l.s})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Final Result:"}),(0,n.jsx)("td",{className:"t-a-r",children:t?"Draw":(0,n.jsxs)("div",{children:[s?"P0":"P1"," wins"]})})]}),!1==t&&(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"with move:"}),(0,n.jsx)("td",{className:"t-a-r",children:"".concat(c)})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Nodes Searched:"}),(0,n.jsx)("td",{className:"t-a-r",children:l.count})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"End:"}),(0,n.jsx)("td",{className:"t-a-r",children:0==l.nexts.length?"True":"False"})]})]})})}function u(e){let{res:t,className:s,moves_num:c}=e;return(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)("h2",{className:"f-t-c",children:" State Info "}),(0,n.jsx)("div",{children:void 0==t?(0,n.jsx)(d,{moves_num:c}):(0,n.jsx)(x,{res:t,moves_num:c})})]})}function f(e){let{board:t,play:s,h:c,w:l,display_actions:r}=e,a=100/l;return(0,n.jsx)("section",{children:(0,n.jsx)("div",{id:"$control",children:r&&t.map((e,t)=>e.length<c?(0,n.jsx)("div",{style:{position:"absolute",width:"".concat(a,"%"),left:"".concat(t*a,"%"),textAlign:"center"},children:(0,n.jsx)("button",{onClick:()=>{s(t+1,!1)},children:"Play"})},t):(0,n.jsx)("div",{},t))})})}s(2600);class j{get(e){let t=this.map,s=h(e),n=t.get(s);if(void 0!=n)return console.log("Getting cached"),new Promise((e,t)=>{e(n)});{let e="".concat(this.host,"/api/c4w7h6/solve/").concat(s);return new Promise((n,c)=>{setTimeout(()=>{let l=Date.now();console.log("From Server, since last: ".concat(l-this.last,"ms")),this.last=l,fetch(e).then(e=>e.json()).then(e=>{t.set(s,e),n(e)}).catch(e=>{c(e)})},Date.now()-this.last<500?500:0)})}}constructor(){this.map=new Map,this.host="https://www.zf-w.space",this.last=0}}let m=o.createContext(new j);function g(){return(0,n.jsxs)("section",{children:[(0,n.jsx)("h2",{className:"f-t-c",children:"Links"}),(0,n.jsxs)("section",{className:"flex-row",children:[(0,n.jsx)("a",{className:"link",href:"/",children:"Home"}),(0,n.jsx)("a",{className:"link",href:"/projects/game/",children:"My Reflections"}),(0,n.jsx)("a",{className:"link",href:"/projects/game/references/",children:"References"})]}),(0,n.jsx)("section",{className:"f-t-c mt5",children:"\xa9 Zhifeng Wang 2024"})]})}function v(){let e=[];(0,o.useEffect)(()=>{let t=window.location.hash;for(let s=1;s<t.length;++s)e.push(Number.parseInt(t[s]))},[]);let t=(0,o.useMemo)(()=>e,[]),[s,c]=(0,o.useState)(!0),[l,r]=(0,o.useState)(!0),a=function(e,t){let s=[];for(let e=0;e<7;++e)s.push([]);for(let t=0;t<e.length;++t)s[e[t]-1].push(t);return s}(t,0),d=(0,o.useContext)(m),[x,j]=(0,o.useState)(!1),[v,p]=(0,o.useState)(!0),[w,N]=(0,o.useState)(void 0);(0,o.useEffect)(()=>{window.location.hash=h(t),d.get(t).then(e=>{N(e),console.log(e)}).catch(e=>{alert("Sorry, an error has occurred during the web fetching. Please try reloading, thanks. Error: ".concat(e))})},[s]);let y=e=>{N(e),c(!s)},b=(e,s)=>{console.log("".concat(s?"AI":"Human"," P").concat(t.length%2," played ").concat(e)),t.push(e),y(void 0),s||r(!1)},_=e=>{let t=e.nexts,s=t[0].a,n=t[0].s;for(let e=1;e<t.length;++e){let c=t[e];c.s<n&&(n=c.s,s=c.a)}b(s+1,!0)};return!l&&void 0!=w&&w.nexts.length>0&&(t.length%2==0?!0==x&&_(w):!0==v&&_(w)),(0,n.jsxs)("main",{className:"main-container",children:[(0,n.jsx)("h1",{className:"f-t-c mt-3",children:"Learning Connect Four"}),(0,n.jsx)("h3",{className:"f-t-c",children:"Designed by Zhifeng 之枫"}),(0,n.jsx)(i,{actions:t,w:7,h:6}),(0,n.jsx)(f,{w:7,h:6,board:a,play:b,display_actions:void 0!=w&&w.nexts.length>0&&(t.length%2==0?!x:!v)}),(0,n.jsxs)("section",{className:"flex-row",children:[(0,n.jsxs)("div",{className:"panel",children:[(0,n.jsx)("h2",{className:"f-t-c",children:"Control"}),(0,n.jsx)("div",{className:"f-t-c",children:(0,n.jsx)("button",{className:"btn",disabled:void 0==w||0==t.length,onClick:()=>{t.length>0&&(t.pop(),y(void 0),r(!0))},children:"Undo"})}),(0,n.jsxs)("div",{className:"flex-row",children:[(0,n.jsx)("div",{className:"f-t-c",children:(0,n.jsxs)("button",{className:"btn",disabled:void 0==w,onClick:()=>{j(!x),r(!1)},children:["P0: ",x?"A.I.":"You."]})}),(0,n.jsx)("div",{className:"f-t-c",children:(0,n.jsxs)("button",{className:"btn",disabled:void 0==w,onClick:()=>{p(!v),r(!1)},children:["P1: ",v?"A.I.":"You."]})})]}),(0,n.jsx)("div",{className:"f-t-c",children:(0,n.jsx)("button",{className:"btn",disabled:void 0==w||0==t.length,onClick:()=>{for(;t.length>0;)t.pop();y(void 0),r(!0)},children:"Restart"})})]}),(0,n.jsx)(u,{className:"panel f-t-c",res:w,moves_num:t.length})]}),(0,n.jsx)(g,{})]})}},2600:function(){},3850:function(){},3952:function(e,t,s){"use strict";var n=s(719),c=Symbol.for("react.element"),l=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,s){var n,l={},o=null,h=null;for(n in void 0!==s&&(o=""+s),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(h=t.ref),t)r.call(t,n)&&!i.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===l[n]&&(l[n]=t[n]);return{$$typeof:c,type:e,key:o,ref:h,props:l,_owner:a.current}}t.Fragment=l,t.jsx=o,t.jsxs=o},8038:function(e,t,s){"use strict";e.exports=s(3952)}},function(e){e.O(0,[120,543,744],function(){return e(e.s=77)}),_N_E=e.O()}]);